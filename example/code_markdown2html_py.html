<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<!--
generated by Pygments <https://pygments.org/>
Copyright 2006-2023 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
-->
<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
* {
        font-size: 12px;
        margin: 0;
        padding: 0;
    }
    html {
        scrollbar-width: none;
        ::-webkit-scrollbar {
            width: 0px;
            height: 0px;
        }
    }
    pre {
        white-space: pre-wrap;
        font-family: monospace;
        color: #ffffff;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 0;
        margin-right: 10px;
        background-color: #171932;
    }
    body {
        font-family: monospace;
        color: #ffffff;
        background-color: #1B1E3C;
    }
/*
generated by Pygments <https://pygments.org/>
Copyright 2006-2023 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
*/
td.linenos .normal { color: #f1fa8c; background-color: #44475a; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #f1fa8c; background-color: #44475a; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #50fa7b; background-color: #6272a4; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #50fa7b; background-color: #6272a4; padding-left: 5px; padding-right: 5px; }
body .hll { background-color: #44475a }
body .c { color: #6272a4 } /* Comment */
body .err { color: #f8f8f2 } /* Error */
body .g { color: #f8f8f2 } /* Generic */
body .k { color: #ff79c6 } /* Keyword */
body .l { color: #f8f8f2 } /* Literal */
body .n { color: #f8f8f2 } /* Name */
body .o { color: #ff79c6 } /* Operator */
body .x { color: #f8f8f2 } /* Other */
body .p { color: #f8f8f2 } /* Punctuation */
body .ch { color: #6272a4 } /* Comment.Hashbang */
body .cm { color: #6272a4 } /* Comment.Multiline */
body .cp { color: #ff79c6 } /* Comment.Preproc */
body .cpf { color: #6272a4 } /* Comment.PreprocFile */
body .c1 { color: #6272a4 } /* Comment.Single */
body .cs { color: #6272a4 } /* Comment.Special */
body .gd { color: #8b080b } /* Generic.Deleted */
body .ge { color: #f8f8f2; text-decoration: underline } /* Generic.Emph */
body .ges { color: #f8f8f2; text-decoration: underline } /* Generic.EmphStrong */
body .gr { color: #f8f8f2 } /* Generic.Error */
body .gh { color: #f8f8f2; font-weight: bold } /* Generic.Heading */
body .gi { color: #f8f8f2; font-weight: bold } /* Generic.Inserted */
body .go { color: #44475a } /* Generic.Output */
body .gp { color: #f8f8f2 } /* Generic.Prompt */
body .gs { color: #f8f8f2 } /* Generic.Strong */
body .gu { color: #f8f8f2; font-weight: bold } /* Generic.Subheading */
body .gt { color: #f8f8f2 } /* Generic.Traceback */
body .kc { color: #ff79c6 } /* Keyword.Constant */
body .kd { color: #8be9fd; font-style: italic } /* Keyword.Declaration */
body .kn { color: #ff79c6 } /* Keyword.Namespace */
body .kp { color: #ff79c6 } /* Keyword.Pseudo */
body .kr { color: #ff79c6 } /* Keyword.Reserved */
body .kt { color: #8be9fd } /* Keyword.Type */
body .ld { color: #f8f8f2 } /* Literal.Date */
body .m { color: #ffb86c } /* Literal.Number */
body .s { color: #bd93f9 } /* Literal.String */
body .na { color: #50fa7b } /* Name.Attribute */
body .nb { color: #8be9fd; font-style: italic } /* Name.Builtin */
body .nc { color: #50fa7b } /* Name.Class */
body .no { color: #f8f8f2 } /* Name.Constant */
body .nd { color: #f8f8f2 } /* Name.Decorator */
body .ni { color: #f8f8f2 } /* Name.Entity */
body .ne { color: #f8f8f2 } /* Name.Exception */
body .nf { color: #50fa7b } /* Name.Function */
body .nl { color: #8be9fd; font-style: italic } /* Name.Label */
body .nn { color: #f8f8f2 } /* Name.Namespace */
body .nx { color: #f8f8f2 } /* Name.Other */
body .py { color: #f8f8f2 } /* Name.Property */
body .nt { color: #ff79c6 } /* Name.Tag */
body .nv { color: #8be9fd; font-style: italic } /* Name.Variable */
body .ow { color: #ff79c6 } /* Operator.Word */
body .pm { color: #f8f8f2 } /* Punctuation.Marker */
body .w { color: #f8f8f2 } /* Text.Whitespace */
body .mb { color: #ffb86c } /* Literal.Number.Bin */
body .mf { color: #ffb86c } /* Literal.Number.Float */
body .mh { color: #ffb86c } /* Literal.Number.Hex */
body .mi { color: #ffb86c } /* Literal.Number.Integer */
body .mo { color: #ffb86c } /* Literal.Number.Oct */
body .sa { color: #bd93f9 } /* Literal.String.Affix */
body .sb { color: #bd93f9 } /* Literal.String.Backtick */
body .sc { color: #bd93f9 } /* Literal.String.Char */
body .dl { color: #bd93f9 } /* Literal.String.Delimiter */
body .sd { color: #bd93f9 } /* Literal.String.Doc */
body .s2 { color: #bd93f9 } /* Literal.String.Double */
body .se { color: #bd93f9 } /* Literal.String.Escape */
body .sh { color: #bd93f9 } /* Literal.String.Heredoc */
body .si { color: #bd93f9 } /* Literal.String.Interpol */
body .sx { color: #bd93f9 } /* Literal.String.Other */
body .sr { color: #bd93f9 } /* Literal.String.Regex */
body .s1 { color: #bd93f9 } /* Literal.String.Single */
body .ss { color: #bd93f9 } /* Literal.String.Symbol */
body .bp { color: #f8f8f2; font-style: italic } /* Name.Builtin.Pseudo */
body .fm { color: #50fa7b } /* Name.Function.Magic */
body .vc { color: #8be9fd; font-style: italic } /* Name.Variable.Class */
body .vg { color: #8be9fd; font-style: italic } /* Name.Variable.Global */
body .vi { color: #8be9fd; font-style: italic } /* Name.Variable.Instance */
body .vm { color: #8be9fd; font-style: italic } /* Name.Variable.Magic */
body .il { color: #ffb86c } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<div class="highlight"><pre><span></span><span class="c1"># imports</span>

<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">markdown</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="nn">slugify</span> <span class="kn">import</span> <span class="n">slugify</span>

<span class="c1"># global vars</span>

<span class="n">article_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">output_programs</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">index_hrefs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">output_soup</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">output_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="c1"># functions</span>

<span class="k">def</span> <span class="nf">reformater_html</span><span class="p">(</span><span class="n">code_html</span><span class="p">):</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">code_html</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">find_programs_get_program_param</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
    <span class="n">program_start</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">program_param</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key_param</span> <span class="ow">in</span> <span class="n">program_param</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="n">program_start</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">key_param</span><span class="p">):</span>
                <span class="n">valeur</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">program_start</span> <span class="o">+</span> <span class="n">j</span><span class="p">][</span><span class="nb">len</span><span class="p">(</span><span class="n">key_param</span><span class="p">):]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valeur</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="n">program_param</span><span class="p">[</span><span class="n">key_param</span><span class="p">]</span> <span class="o">=</span> <span class="n">valeur</span>
        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span><span class="p">(</span><span class="n">program_start</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">find_programs_convert_inline_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">program_end</span><span class="p">):</span>
    <span class="n">html_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">code_debut</span> <span class="o">=</span> <span class="n">program_end</span>
    <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">lines</span><span class="p">[</span><span class="n">code_debut</span> <span class="o">+</span> <span class="n">j</span><span class="p">]:</span> <span class="k">break</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">html_code</span> <span class="o">=</span> <span class="s2">&quot;error : end of inline program not found...&quot;</span>
            <span class="k">break</span>        
        <span class="k">if</span> <span class="s1">&#39;&lt;!-- program&gt;&#39;</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="n">code_debut</span> <span class="o">+</span> <span class="n">j</span><span class="p">]:</span>
            <span class="n">html_code</span> <span class="o">=</span> <span class="s2">&quot;error : other start of inline program found...&quot;</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="s1">&#39;&lt;program --&gt;&#39;</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="n">code_debut</span> <span class="o">+</span> <span class="n">j</span><span class="p">]:</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="n">code_debut</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">+=</span> <span class="n">lines</span><span class="p">[</span><span class="n">code_debut</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span>
        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">html_code</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">echo_command</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">]</span>        
        <span class="k">if</span> <span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number:&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>                        
            <span class="n">option_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;full,style=</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;theme:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>                        
        <span class="k">else</span><span class="p">:</span>                        
            <span class="n">option_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;full,style=</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;theme:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,linenos=1&quot;</span>
        <span class="n">pygmentize_command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;pygmentize&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;html&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;langage:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-O&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">option_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">]</span>
        <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">echo_command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span> <span class="k">as</span> <span class="n">echo_proc</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">pygmentize_command</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">echo_proc</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span> <span class="k">as</span> <span class="n">pygmentize_proc</span><span class="p">:</span>
                <span class="n">subprocess_output</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">pygmentize_proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
        <span class="k">return</span><span class="p">(</span><span class="n">subprocess_output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">find_programs_convert_file_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">):</span>
    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;code:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">check_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">check_file</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number:&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
            <span class="n">option_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;full,style=</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;theme:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">option_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;full,style=</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;theme:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,linenos=1&quot;</span>
        <span class="n">pygmentize_command</span> <span class="o">=</span>\
            <span class="s2">&quot;pygmentize &quot;</span><span class="o">+</span>\
            <span class="s2">&quot;-f &quot;</span><span class="o">+</span>\
            <span class="s2">&quot;html &quot;</span><span class="o">+</span>\
            <span class="s2">&quot;-l &quot;</span><span class="o">+</span>\
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;language:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span><span class="o">+</span>\
            <span class="s2">&quot;-O &quot;</span><span class="o">+</span>\
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">option_number</span><span class="si">}</span><span class="s2"> &quot;</span><span class="o">+</span>\
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;code:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="n">subprocess</span><span class="o">.</span><span class="n">getoutput</span><span class="p">(</span><span class="n">pygmentize_command</span><span class="p">))</span>    
    <span class="k">else</span><span class="p">:</span>        
        <span class="k">return</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;error : , </span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;code:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> no exist&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">find_programs_format_html_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">html_code</span><span class="p">):</span>
    <span class="n">div_highlight_style</span> <span class="o">=</span>\
        <span class="s2">&quot;overflow: auto;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;height: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-height:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;border-radius: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-border-radius:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;width: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-width:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;margin: auto;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;border: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-border:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;background: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-background:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;box-shadow: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-shadow:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span>
    <span class="n">td_linenos_style</span> <span class="o">=</span> <span class="s2">&quot;td.linenos .normal {&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;color: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-color:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;background-color: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-background-color:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;border: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-border:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;border-radius: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-border-radius:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;padding-left: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-padding-left-right:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;padding-right: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-padding-left-right:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;margin-left: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-margin-left:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;margin-right: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-margin-right:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="sa">f</span><span class="s2">&quot;font-weight: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number-font-weight:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                        <span class="s2">&quot;}&quot;</span>
    <span class="n">html_lignes</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">html_lignes</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ligne</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;pre {&#39;</span><span class="p">):</span>
            <span class="k">del</span> <span class="n">html_lignes</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span>
            <span class="k">break</span>
    <span class="n">html_lignes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&lt;style&gt;&quot;</span>    
    <span class="n">html_lignes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">td_linenos_style</span>
    <span class="n">html_code</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">html_lignes</span><span class="p">)</span>    
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_code</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>    
    <span class="n">highlight_div</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;highlight&#39;</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">highlight_div</span><span class="p">:</span>
        <span class="n">highlight_div</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">div_highlight_style</span>
    <span class="n">html_code</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>    
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_code</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>    
    <span class="n">balises_pre</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;pre&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">balise</span> <span class="ow">in</span> <span class="n">balises_pre</span><span class="p">:</span>
        <span class="n">balise</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;line-height: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-line-height:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;margin-top: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-margin-top:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;margin-bottom: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-margin-bottom:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;margin-left: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-margin-left:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;margin-right: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-margin-right:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;font-family: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-font-family:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="sa">f</span><span class="s2">&quot;font-size: </span><span class="si">{</span><span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;box-font-size:&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span><span class="o">+</span>\
                            <span class="s2">&quot;padding: 0;&quot;</span>
        <span class="k">if</span> <span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;number:&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">balise</span><span class="p">[</span><span class="s1">&#39;style&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;width: max-content;&quot;</span>
    <span class="n">html_code</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>    
    <span class="k">return</span><span class="p">(</span><span class="n">html_code</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">find_programs</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">article_name</span>
    <span class="k">global</span> <span class="n">output_programs</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/article.md&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">cpt_program</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&lt;!-- program&gt;&#39;</span><span class="p">):</span>
            <span class="n">cpt_program</span> <span class="o">+=</span> <span class="mi">1</span>            
            <span class="n">program_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;number:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-color:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-background-color:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-border:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-border-radius:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-padding-left-right:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-margin-left:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-margin-right:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;number-font-weight:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-background:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-border:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>                 
                <span class="s1">&#39;box-border-radius:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-shadow:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-font-size:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-font-family:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-line-height:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-width:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-height:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-margin-top:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-margin-bottom:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-margin-left:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;box-margin-right:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;language:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;theme:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;code:&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span>
            <span class="p">}</span>
            <span class="n">program_end</span> <span class="o">=</span> <span class="n">find_programs_get_program_param</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">program_param</span><span class="p">[</span><span class="s1">&#39;code:&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">find_programs_convert_inline_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">program_end</span><span class="p">)</span>                                        
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">find_programs_convert_file_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">html_code</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">):</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">find_programs_format_html_code</span><span class="p">(</span><span class="n">program_param</span><span class="p">,</span> <span class="n">html_code</span><span class="p">)</span>                
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;body&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/body&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/html&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/head&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">identifiant_unique</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>                
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^body&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.highlight-</span><span class="si">{</span><span class="n">identifiant_unique</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">html_code</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;class=&quot;highlight&quot;&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;class=&quot;highlight-</span><span class="si">{</span><span class="n">identifiant_unique</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.normal&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.normal-</span><span class="si">{</span><span class="n">identifiant_unique</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">html_code</span> <span class="o">=</span> <span class="n">html_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;class=&quot;normal&quot;&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;class=&quot;normal-</span><span class="si">{</span><span class="n">identifiant_unique</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="n">output_programs</span> <span class="o">+=</span> <span class="n">html_code</span>
        <span class="n">output_programs</span> <span class="o">+=</span> <span class="n">line</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of tags &lt;program&gt; found : </span><span class="si">{</span><span class="n">cpt_program</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">find_hrefs</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">output_soup</span>
    <span class="k">global</span> <span class="n">article_name</span>
    <span class="k">global</span> <span class="n">output_html</span>
    <span class="n">output_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">output_html</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion of tags &lt;h3&gt; to &lt;a href&gt;&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h3</span> <span class="ow">in</span> <span class="n">output_soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h3&quot;</span><span class="p">):</span>
        <span class="n">balise_section</span> <span class="o">=</span> <span class="n">output_soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;section&quot;</span><span class="p">)</span>
        <span class="n">balise_section</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">h3</span><span class="o">.</span><span class="n">string</span>
        <span class="n">slugify_title</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">h3</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
        <span class="n">balise_section</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">slugify_title</span>
        <span class="n">h3</span><span class="o">.</span><span class="n">replace_with</span><span class="p">(</span><span class="n">balise_section</span><span class="p">)</span>
        <span class="n">ahref</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;a href=&#39;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/article.html#</span><span class="si">{</span><span class="n">slugify_title</span><span class="si">}</span><span class="s2">&#39; target=&#39;iframe_main_content&#39; class=&#39;custom-link-list-index&#39; onclick=&#39;click_index()&#39;&gt;</span><span class="si">{</span><span class="n">h3</span><span class="o">.</span><span class="n">string</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span>
        <span class="n">index_hrefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ahref</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Converting internal links to index starting with the character &#39;-&#39;&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Modifying external links to open in a new tab&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">output_soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>        
            <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
                <span class="n">index_hrefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;a href=&#39;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; target=&#39;iframe_main_content&#39;  class=&#39;custom-link-list-index&#39; onclick=&#39;click_index()&#39;&gt;</span><span class="si">{</span><span class="n">a</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span><span class="p">)</span>
                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">output_soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span>
                <span class="n">new_tag</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                <span class="n">a</span><span class="o">.</span><span class="n">replace_with</span><span class="p">(</span><span class="n">new_tag</span><span class="p">)</span>
            <span class="n">href</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">href</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s1">&#39;https&#39;</span> <span class="ow">in</span> <span class="n">href</span><span class="p">:</span>
                    <span class="n">a</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;_blank&#39;</span>                    
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>            
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;NoneType&#39; object has no attribute &#39;startswith&#39;&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&gt; if a.string.startswith(&#39;-&#39;):&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_md_file</span><span class="p">(</span><span class="n">arg_md_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
	<span class="k">global</span> <span class="n">article_name</span>
	<span class="n">path</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">arg_md_file</span><span class="p">)</span>	
	<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
	<span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">arg_md_file</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/article.md&quot;</span><span class="p">)</span>
	<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Source file </span><span class="si">{</span><span class="n">arg_md_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Destination file </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/article.md&quot;</span><span class="p">)</span>
	<span class="n">article_name</span> <span class="o">=</span> <span class="n">path</span>

<span class="c1"># main</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">update_md_file</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The Markdown file does not exist&quot;</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The Markdown file is missing&quot;</span><span class="p">)</span>
    <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Search for code sections related to &lt;program&gt;&quot;</span><span class="p">)</span>
<span class="n">find_programs</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conversion from Markdown to HTML&quot;</span><span class="p">)</span>
<span class="n">output_html</span> <span class="o">=</span> <span class="n">markdown</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">output_programs</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fenced_code&#39;</span><span class="p">,</span> <span class="s1">&#39;codehilite&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creation and search for links for creating an index&quot;</span><span class="p">)</span>
<span class="n">find_hrefs</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Saving the index section.html&quot;</span><span class="p">)</span>
<span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/sections.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">index_hrefs</span><span class="p">:</span>
    <span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading the markdown2html.css file&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;markdown2html.css&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fichier</span><span class="p">:</span>
    <span class="n">style_html</span> <span class="o">=</span> <span class="n">fichier</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading the markdown.css file&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;markdown.css&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fichier</span><span class="p">:</span>
    <span class="n">style_markdown</span> <span class="o">=</span> <span class="n">fichier</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">javascript</span> <span class="o">=</span> <span class="s2">&quot;&lt;script&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
    <span class="s2">&quot;window.addEventListener(&#39;DOMContentLoaded&#39;, function() {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;var links = document.getElementsByTagName(&#39;a&#39;);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;for (var i = 0; i &lt; links.length; i++) {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;links[i].addEventListener(&#39;click&#39;, function(event) {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
                <span class="s2">&quot;var link = event.target.href;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
                <span class="s2">&quot;if (link.includes(&#39;#&#39;)) {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
                    <span class="s2">&quot;event.preventDefault();</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
                    <span class="s2">&quot;window.parent.postMessage({type: &#39;linkClicked&#39;, link: link}, &#39;*&#39;);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
                <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;});</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
    <span class="s2">&quot;});</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span>\
    <span class="s2">&quot;&lt;/script&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creation of the HTML file&quot;</span><span class="p">)</span>
<span class="n">fichier_html</span> <span class="o">=</span>  <span class="s2">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="o">+</span>\
    <span class="s2">&quot;&lt;html lang=&#39;fr&#39;&gt;&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;&lt;head&gt;&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;&lt;meta charset=&#39;UTF-8&#39; /&gt;&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;&lt;meta name=&#39;viewport&#39; content=&#39;width=device-width&#39;&gt;&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;&lt;style&gt;&quot;</span><span class="o">+</span>\
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">style_html</span><span class="si">}{</span><span class="n">style_markdown</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span>\
            <span class="s2">&quot;&lt;/style&gt;&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;&lt;/head&gt;&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;&lt;body&gt;&quot;</span><span class="o">+</span>\
			<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span>\
        <span class="s2">&quot;&lt;/body&gt;&quot;</span><span class="o">+</span>\
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">javascript</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">+</span>\
    <span class="s2">&quot;&lt;/html&gt;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Save the html file article.html&quot;</span><span class="p">)</span>
<span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">article_name</span><span class="si">}</span><span class="s2">/article.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">reformater_html</span><span class="p">(</span><span class="n">fichier_html</span><span class="p">))</span>
<span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</body>
</html>
